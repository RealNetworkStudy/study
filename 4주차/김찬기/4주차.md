## 액세스 회선: 인터넷과 LAN을 연결하는 통신 회선

- ADSL과 FTTH가 대표적이다.

# 1. ADSL 기술을 이용한 액세스 회선의 구조와 동작

라우터의 중계 동작은 인터넷과 이더넷 모두 동일하지만 인터넷의 패킷 송신 동작은 **액세스 회선 규칙**을 따른다.

- MAC 헤더, PPPoE 헤더, PPP 헤더 3개가 붙고, 이더넷의 규칙에 따라 신호로 변환하여 송신한다.

사용자 → ADSL 모뎀 → 스플리터 → DSLAM → BAS → 터널링 라우터 순으로 전송된다.

## ADSL (Asymmetric Digital Subscriber Line)

전화용 금속제 케이블을 이용해 고속통신하는 기술

→ 업로드(상향)와 다운로드(하향) 속도가 서로 다르다. (다운로드 회선에 더 많은 대역폭을 할당)

- 데이터 통신과 음성 통화를 동시에 제공한다.

| 대역대 | 용도 |
| --- | --- |
| 0 ~ 4kHz | 음성 통화 (전화) |
| 25kHz ~ 138kHz | 업로드 데이터 |
| 138kHz ~ 1.1MHz | 다운로드 데이터 |

### ADSL 모뎀

1. 패킷을 송신하여 셀이라는 디지털 데이터 덩어리로 분할하여 저장 → 전기 신호로 변환 → 스플리터에게 전송
    - 셀을 사용하면 다른 통신 설비와의 연계가 매끄럽다.
2. 셀 → 전기 신호 변환 과정에서, 진폭 변조와 위상 변조를 결합한 직교 진폭 변조 방식을 사용한다.

![image](https://github.com/user-attachments/assets/a1670e44-3bb9-439f-afe7-32c26836ba80)


### 스플리터

사용자측 → 전화 회선으로 송출할 때는 전화 신호와 ADSL 신호를 그대로 흘려주기만 한다.

전화 회선으로부터 신호가 들어올 경우 전화와 ADSL의 신호를 나눠준다.

- 전화기 측에 ADSL의 신호가 흐르면 잡음이 되기 때문에 흐르지 않도록 하는 것이 스플리터의 역할이다.
- 특정 주파수를 초과하는 신호를 차단 → ADSL의 높은 주파수 신호 차단

### DSLAM (DSL Access Multiplexer)

ADSL 모뎀을 하나의 케이스에 넣은 기기로, 도착한 전기 신호를 다시 디지털 데이터인 셀로 복원된다.

- 사용자 측 ADSL 모뎀은 이더의 패킷 형태로 송수신하지만 DSLAM은 셀의 형태로 라우터와 송수신한다.

### BAS (Broadband Access Sever)

사용자(ADSL, FTTH 등)의 접속 요청을 받아 인증, IP 할당, 계정 관리 등을 수행한다.

→ 인터넷 접속 인증과 관리를 담당

셀을 수신하고, 원래의 패킷으로 복원한다. 수신한 패킷 앞부분인 MAC 헤더와 PPPoE 헤더를 버리고 PPP 헤더 이후 부분을 추출하여 터널링용 헤더를 붙여 터널링 라우터에 중계한다.

# 2. 광섬유(FTTH)를 이용한 액세스 회선

### 광섬유 통신 원리

1. 디지털 데이터를 전기 신호로 변환 후 전기 신호를 광신호로 변환 → 전압이 높으면 밝고 낮으면 어둡다.
2. 전시 긴호를 광원(LED, 포토 다이오드 등)에 입력하면, 입력된 전기 신호의 전압에 따라 빛을 발한다.
3. 발생한 빛을 광섬유 안에 통과시켜 흘려 보낸다.
4. 수신 측에서는 수광 소자(빛의 밝기에 따라 전압을 일으킨다.)를 통해 빛으로부터 전기 신호를 발생시킨다.
5. 발생한 전기 신호를 디지털 데이터로 변환해서 수신한다.

Fiber To The X → 어디까지 가냐?

![image](https://github.com/user-attachments/assets/ca5e2edc-efa0-40fc-a95d-495b74e1be8c)


## FTTH (Fiber To The Home)

광섬유를 사용자의 집까지 직접 연결하여 초고속 통신을 제공하는 구조이다.

## 싱글 모드 vs 멀티 모드

코어의 굵기에 따라서 구분된다.

### 싱글 모드

- 코어가 가늘고 입사각이 작은 빛만 속으로 들어가므로 위상이 같은 각도 중 가장 작은 각도의 빛만 흐른다.
- 신호의 변형이 적기 때문에 케이블 길이를 길게 할 수 있다. → 전송 거리가 길다.

### 멀티 모드

- 코어가 굵고 입사각이 큰 빛도 들어가므로 여러 개의 빛이 흐른다.
- 신호의 변형이 잦기 때문에 케이블을 길게 할 수 없다. → 전송 가리가 짧다.
- 대역폭이 넓다.

# 3. 액세스 회선에서 사용되는 PPP와 터널링

인터넷 = 다수의 라우터를 연결하여 만든 것 → 액세스 회선도 라우터에 연결해야 한다.

액세스 회선이 ADSL과 FTTH 형태로 나타나는 것처럼 라우터도 이러한 회선을 연결할 수 있도록 진화한 형태가 BAS이다.

### BAS의 기능

1. 본인 확인 및 설정값 통지
    - ADSL과 FTTH의 액세스 회선은 최초에 로그인 동작을 실행하지 않으면 인터넷에 접근할 수 없다.
    - 이때 BAS는 PPP 구조를 발전시킨 PPPoE(Point to Point Protocol over Ethernet) 구조를 사용한다.
        - PPP
            1. 프로바이더의 액세스 포인트에 전화
            2. 연결되면 로그인 → 인증 → IP 주소 설정 후 TCP/IP 송수신
        - PPPoE: PPP 메시지를 이너넷의 패킷에 넣어 주고 받는다.
            - 이더넷은 인증, 세션, IP 할당 등의 기능이 없다.
            - 이더넷 + PPP = PPPoE → 이더넷에서 인증, 세션, IP 할당 등 가능
    - 인증에 성공하면 IP 주소 등 패킷 송수신에 필요한 값을 사용자에게 통지한다.
2. 터널링: 네트워크 패킷을 다른 프로토콜의 패킷 안에 감싸서 전송하는 기술

# 4. 액세스 회선 앞에 존재하는 프로바이더 네트워크

BAS를 통과한 패킷은 프로바이더 측의 라우터에 도착한다. → 이곳이 인터넷의 입구 → 여기서부터 패킷은 인터넷의 내부로 들어간다.

### 프로바이더

인터넷 서비스를 제공하는 ISP(Internet Service Provider) → SK, KT, LG U+ 등

인터넷은 여러 프로바이더가 접속한 형태 → 액세스 회선은 프로바이더 내부에 연결된다.

### POP(Point of Presence)

액세스 회선이 연결되는 프로바이더의 설비 → 라우터가 여기에 설치되어 있다.

### NOC

POP에 들어온 패킷들이 모여드는 설비

→ POP의 규모가 큰 것이 NOC라고 생각하면 된다.

# 5. 프로바이더를 경유하여 흐르는 패킷

POP을 경유한 패킷은 웹서버를 향한다. → 두 가지 경우 존재

1. 웹서버가 클라이언트와 같은 프로바이더에 존재하는 경우
2. 다른 프로바이더에 존재하는 경우

→ 어떤 경우이든 라우팅 테이블을 보고 경로를 탐색하여 중계 대상에 패킷을 보낸다.

### 라우팅 테이블 교환

다른 프로바이더의 라우터끼리 통신을 하면 본인의 서브넷 경로를 알려준다. → 라우터가 자동적으로 수행한다.

→ BGP(Boder Gateway Protocol)

1. transit(전부 통지): 알고 있는 모든 경로를 알려준다. → 나와 연결된 X 프로바이더는 어디든지 갈 수 있다.
2. non-transit or peer: 서로의 네트워크에 관한 정보만 알려준다. → 서로에게 갈 패킷만 필요할 경우 사용 → 더 빠르다.

### IX (Intenet Exchange)

다수의 프로바이더는 1:1 형태로 접속하는 것이 기본이다. → 모든 프로바이더가 서로 회선을 연결해야 한다. → 비효율적

→ 중심이 되는 설비를 설치하여 이것을 경유하여 접속 → 회선의 수를 줄일 수 있다.

이때 설치하는 설비가 IX이다.

![image](https://github.com/user-attachments/assets/37437fcc-6433-4ab3-ae47-9f7549db4aa6)
